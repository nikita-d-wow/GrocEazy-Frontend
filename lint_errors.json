[
  {
    "filePath": "C:\\Users\\navya\\Desktop\\Groceazy-code\\client\\src\\App.tsx",
    "messages": [
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement.",
        "line": 48,
        "column": 11,
        "nodeType": "MemberExpression",
        "messageId": "unexpected",
        "endLine": 48,
        "endColumn": 24,
        "suggestions": [
          {
            "fix": { "range": [1715, 1764], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "error" },
            "desc": "Remove the console.error()."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "// src/App.tsx\r\nimport { useEffect } from 'react';\r\nimport './App.css';\r\nimport { Routes, Route } from 'react-router-dom';\r\nimport { Toaster } from 'react-hot-toast';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { PublicRoutes } from './routes/PublicRoutes';\r\nimport { CustomerRoutes } from './routes/CustomerRoutes';\r\nimport { ManagerRoutes } from './routes/ManagerRoutes';\r\nimport { AdminRoutes } from './routes/AdminRoutes';\r\n\r\nimport Unauthorized from './views/auth/Unauthorized';\r\nimport ScrollToTop from './components/common/ScrollToTop';\r\n\r\nimport { AUTH_KEYS } from './constants/auth';\r\nimport api from './services/api';\r\nimport { AUTH_LOGIN_SUCCESS, AUTH_LOGOUT } from './redux/types/authTypes';\r\n\r\nfunction App() {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(AUTH_KEYS.ACCESS_TOKEN);\r\n    const refreshToken = localStorage.getItem(AUTH_KEYS.REFRESH_TOKEN);\r\n\r\n    // Scenario: User has Refresh Token but Access Token is missing (or expired/flush)\r\n    if (!token && refreshToken) {\r\n      // Attempt to restore session\r\n      api.post('/api/auth/refresh', { refreshToken })\r\n        .then(res => {\r\n          const { accessToken, refreshToken: newRefresh, user } = res.data;\r\n\r\n          localStorage.setItem(AUTH_KEYS.ACCESS_TOKEN, accessToken);\r\n          if (newRefresh) {\r\n            localStorage.setItem(AUTH_KEYS.REFRESH_TOKEN, newRefresh);\r\n          }\r\n          if (user) {\r\n            localStorage.setItem(AUTH_KEYS.USER, JSON.stringify(user));\r\n          }\r\n\r\n          dispatch({\r\n            type: AUTH_LOGIN_SUCCESS,\r\n            payload: { accessToken, user }\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          console.error(\"Session restoration failed\", err);\r\n          // If restore fails, clear everything to be safe\r\n          localStorage.removeItem(AUTH_KEYS.ACCESS_TOKEN);\r\n          localStorage.removeItem(AUTH_KEYS.REFRESH_TOKEN);\r\n          localStorage.removeItem(AUTH_KEYS.USER);\r\n          dispatch({ type: AUTH_LOGOUT });\r\n        });\r\n    }\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <div>\r\n      <Toaster />\r\n      <ScrollToTop />\r\n      <Routes>\r\n        {PublicRoutes}\r\n\r\n        {/* PROTECTED ROUTES */}\r\n        {CustomerRoutes}\r\n        {ManagerRoutes}\r\n        {AdminRoutes}\r\n\r\n        {/* COMMON ROUTES */}\r\n        <Route path=\"/unauthorized\" element={<Unauthorized />} />\r\n\r\n        {/* FALLBACK */}\r\n        <Route path=\"*\" element={<Unauthorized />} />\r\n      </Routes>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n",
    "usedDeprecatedRules": [
      {
        "ruleId": "no-multiple-empty-lines",
        "replacedBy": ["@stylistic/no-multiple-empty-lines"],
        "info": {
          "message": "Formatting rules are being moved out of ESLint core.",
          "url": "https://eslint.org/blog/2023/10/deprecating-formatting-rules/",
          "deprecatedSince": "8.53.0",
          "availableUntil": "11.0.0",
          "replacedBy": [
            {
              "message": "ESLint Stylistic now maintains deprecated stylistic core rules.",
              "url": "https://eslint.style/guide/migration",
              "plugin": {
                "name": "@stylistic/eslint-plugin",
                "url": "https://eslint.style"
              },
              "rule": {
                "name": "no-multiple-empty-lines",
                "url": "https://eslint.style/rules/no-multiple-empty-lines"
              }
            }
          ]
        }
      },
      {
        "ruleId": "arrow-spacing",
        "replacedBy": ["@stylistic/arrow-spacing"],
        "info": {
          "message": "Formatting rules are being moved out of ESLint core.",
          "url": "https://eslint.org/blog/2023/10/deprecating-formatting-rules/",
          "deprecatedSince": "8.53.0",
          "availableUntil": "11.0.0",
          "replacedBy": [
            {
              "message": "ESLint Stylistic now maintains deprecated stylistic core rules.",
              "url": "https://eslint.style/guide/migration",
              "plugin": {
                "name": "@stylistic/eslint-plugin",
                "url": "https://eslint.style"
              },
              "rule": {
                "name": "arrow-spacing",
                "url": "https://eslint.style/rules/arrow-spacing"
              }
            }
          ]
        }
      }
    ]
  },
  {
    "filePath": "C:\\Users\\navya\\Desktop\\Groceazy-code\\client\\src\\components\\customer\\profile\\AddressManager.tsx",
    "messages": [
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement.",
        "line": 40,
        "column": 13,
        "nodeType": "MemberExpression",
        "messageId": "unexpected",
        "endLine": 40,
        "endColumn": 26,
        "suggestions": [
          {
            "fix": { "range": [1730, 1778], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "error" },
            "desc": "Remove the console.error()."
          }
        ]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement.",
        "line": 56,
        "column": 17,
        "nodeType": "MemberExpression",
        "messageId": "unexpected",
        "endLine": 56,
        "endColumn": 30,
        "suggestions": [
          {
            "fix": { "range": [2296, 2346], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "error" },
            "desc": "Remove the console.error()."
          }
        ]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement.",
        "line": 75,
        "column": 13,
        "nodeType": "MemberExpression",
        "messageId": "unexpected",
        "endLine": 75,
        "endColumn": 26,
        "suggestions": [
          {
            "fix": { "range": [3011, 3058], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "error" },
            "desc": "Remove the console.error()."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 3,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Plus, MapPin, Edit2, Trash2, CheckCircle, Star } from 'lucide-react';\r\n\r\nimport type { AppDispatch } from '../../../redux/store';\r\nimport type { IAddress, IUser } from '../../../redux/types/authTypes';\r\nimport { addAddress, updateAddress, deleteAddress } from '../../../redux/actions/profileActions';\r\n\r\nimport AddressModal from './AddressModal';\r\n\r\ninterface AddressManagerProps {\r\n    user: IUser;\r\n}\r\n\r\nexport default function AddressManager({ user }: AddressManagerProps) {\r\n    const dispatch = useDispatch<AppDispatch>();\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [editingAddress, setEditingAddress] = useState<IAddress | null>(null);\r\n    const [loadingAction, setLoadingAction] = useState<string | null>(null);\r\n\r\n    const handleSave = async (addressData: Partial<IAddress>) => {\r\n        if (loadingAction) {\r\n            return; // Prevent double submit\r\n        }\r\n        setLoadingAction('save');\r\n        try {\r\n            if (editingAddress && editingAddress._id) {\r\n                // Merge with existing address to ensure no fields are lost\r\n                const fullAddress = { ...editingAddress, ...addressData };\r\n\r\n                // Strip all immutable/metadata fields to prevent backend 500 errors\r\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n                const { _id, __v, createdAt, updatedAt, ...cleanData } = fullAddress as any;\r\n\r\n                await dispatch(updateAddress(editingAddress._id, cleanData));\r\n            } else {\r\n                await dispatch(addAddress(addressData));\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to save address:', error);\r\n        } finally {\r\n            setLoadingAction(null);\r\n            setIsModalOpen(false); // Close modal here only after logic runs\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (addressId: string) => {\r\n        if (loadingAction) {\r\n            return;\r\n        }\r\n        if (confirm('Are you sure you want to delete this address?')) {\r\n            setLoadingAction(addressId);\r\n            try {\r\n                await dispatch(deleteAddress(addressId));\r\n            } catch (error) {\r\n                console.error('Failed to delete address:', error);\r\n            } finally {\r\n                setLoadingAction(null);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleSetDefault = async (address: IAddress) => {\r\n        if (loadingAction || address.isDefault || !address._id) {\r\n            return;\r\n        }\r\n        setLoadingAction(address._id);\r\n        try {\r\n            // Strip all immutable/metadata fields\r\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n            const { _id, __v, createdAt, updatedAt, ...cleanData } = address as any;\r\n\r\n            await dispatch(updateAddress(address._id, { ...cleanData, isDefault: true }));\r\n        } catch (error) {\r\n            console.error('Failed to set default:', error);\r\n        } finally {\r\n            setLoadingAction(null);\r\n        }\r\n    };\r\n\r\n    const openAddModal = () => {\r\n        setEditingAddress(null);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const openEditModal = (address: IAddress) => {\r\n        setEditingAddress(address);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">Saved Addresses</h3>\r\n                <button\r\n                    onClick={openAddModal}\r\n                    className=\"flex items-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors font-medium text-sm\"\r\n                >\r\n                    <Plus size={16} />\r\n                    Add New Address\r\n                </button>\r\n            </div>\r\n\r\n            {!user.addresses || user.addresses.length === 0 ? (\r\n                <div className=\"text-center py-12 bg-gray-50 rounded-xl border border-dashed border-gray-200\">\r\n                    <MapPin size={48} className=\"mx-auto text-gray-300 mb-3\" />\r\n                    <p className=\"text-gray-500\">No addresses saved yet.</p>\r\n                    <button\r\n                        onClick={openAddModal}\r\n                        className=\"mt-2 text-green-600 hover:text-green-700 font-medium text-sm\"\r\n                    >\r\n                        Add your first address\r\n                    </button>\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    {user.addresses\r\n                        .filter(address => address && address.street && address.city) // Filter out broken addresses\r\n                        .map((address) => (\r\n                            <div\r\n                                key={address._id || Math.random()}\r\n                                className={`relative p-5 rounded-xl border shadow-sm transition-all group ${address.isDefault\r\n                                    ? 'border-green-500 bg-green-50/30 ring-2 ring-green-200'\r\n                                    : 'border-gray-100 bg-white hover:border-gray-200'\r\n                                    }`}\r\n                            >\r\n                                {address.isDefault && (\r\n                                    <div className=\"absolute -top-3 left-4 bg-green-600 text-white flex items-center gap-1 text-xs font-bold px-3 py-1 rounded-full shadow-sm\">\r\n                                        <CheckCircle size={12} />\r\n                                        Default Address\r\n                                    </div>\r\n                                )}\r\n\r\n                                <div className=\"flex items-start gap-3 mb-3 mt-2\">\r\n                                    <div className={`p-2 rounded-lg ${address.isDefault ? 'bg-green-100 text-green-700' : 'bg-gray-50 text-gray-400'}`}>\r\n                                        <MapPin size={20} />\r\n                                    </div>\r\n                                    <div>\r\n                                        <p className=\"font-medium text-gray-900\">\r\n                                            {address.street}\r\n                                        </p>\r\n                                        <p className=\"text-sm text-gray-500\">\r\n                                            {address.city}, {address.state} {address.zipCode}\r\n                                        </p>\r\n                                        <p className=\"text-sm text-gray-400\">{address.country}</p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center justify-between mt-4 pt-4 border-t border-gray-50\">\r\n                                    {!address.isDefault ? (\r\n                                        <button\r\n                                            onClick={() => handleSetDefault(address)}\r\n                                            disabled={loadingAction === address._id}\r\n                                            className=\"text-xs text-gray-500 hover:text-green-600 font-medium flex items-center gap-1 transition-colors\"\r\n                                        >\r\n                                            <Star size={12} />\r\n                                            Set as Default\r\n                                        </button>\r\n                                    ) : (\r\n                                        <span className=\"text-xs text-green-600 font-semibold flex items-center gap-1\">\r\n                                            <Star size={12} fill=\"currentColor\" />\r\n                                            Active Default\r\n                                        </span>\r\n                                    )}\r\n                                    <div className=\"flex items-center gap-2 ml-auto\">\r\n                                        <button\r\n                                            onClick={() => openEditModal(address)}\r\n                                            className=\"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-gray-600 hover:bg-gray-50 rounded-md transition-colors border border-gray-100 hover:border-gray-200\"\r\n                                        >\r\n                                            <Edit2 size={12} />\r\n                                            Edit\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => address._id && handleDelete(address._id)}\r\n                                            disabled={loadingAction === address._id}\r\n                                            className=\"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-red-600 hover:bg-red-50 rounded-md transition-colors border border-gray-100 hover:border-red-100\"\r\n                                        >\r\n                                            {loadingAction === address._id ? (\r\n                                                <span className=\"w-3 h-3 border border-red-200 border-t-red-600 rounded-full animate-spin\"></span>\r\n                                            ) : (\r\n                                                <Trash2 size={12} />\r\n                                            )}\r\n                                            Delete\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                </div>\r\n            )}\r\n\r\n            <AddressModal\r\n                isOpen={isModalOpen}\r\n                onClose={() => setIsModalOpen(false)}\r\n                onSave={handleSave}\r\n                initialData={editingAddress}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n",
    "usedDeprecatedRules": [
      {
        "ruleId": "no-multiple-empty-lines",
        "replacedBy": ["@stylistic/no-multiple-empty-lines"],
        "info": {
          "message": "Formatting rules are being moved out of ESLint core.",
          "url": "https://eslint.org/blog/2023/10/deprecating-formatting-rules/",
          "deprecatedSince": "8.53.0",
          "availableUntil": "11.0.0",
          "replacedBy": [
            {
              "message": "ESLint Stylistic now maintains deprecated stylistic core rules.",
              "url": "https://eslint.style/guide/migration",
              "plugin": {
                "name": "@stylistic/eslint-plugin",
                "url": "https://eslint.style"
              },
              "rule": {
                "name": "no-multiple-empty-lines",
                "url": "https://eslint.style/rules/no-multiple-empty-lines"
              }
            }
          ]
        }
      },
      {
        "ruleId": "arrow-spacing",
        "replacedBy": ["@stylistic/arrow-spacing"],
        "info": {
          "message": "Formatting rules are being moved out of ESLint core.",
          "url": "https://eslint.org/blog/2023/10/deprecating-formatting-rules/",
          "deprecatedSince": "8.53.0",
          "availableUntil": "11.0.0",
          "replacedBy": [
            {
              "message": "ESLint Stylistic now maintains deprecated stylistic core rules.",
              "url": "https://eslint.style/guide/migration",
              "plugin": {
                "name": "@stylistic/eslint-plugin",
                "url": "https://eslint.style"
              },
              "rule": {
                "name": "arrow-spacing",
                "url": "https://eslint.style/rules/arrow-spacing"
              }
            }
          ]
        }
      }
    ]
  },
  {
    "filePath": "C:\\Users\\navya\\Desktop\\Groceazy-code\\client\\src\\components\\customer\\profile\\ProfileInfo.tsx",
    "messages": [
      {
        "ruleId": "no-undef",
        "severity": 2,
        "message": "'React' is not defined.",
        "line": 26,
        "column": 30,
        "nodeType": "Identifier",
        "messageId": "undef",
        "endLine": 26,
        "endColumn": 35
      },
      {
        "ruleId": "no-undef",
        "severity": 2,
        "message": "'React' is not defined.",
        "line": 51,
        "column": 36,
        "nodeType": "Identifier",
        "messageId": "undef",
        "endLine": 51,
        "endColumn": 41
      }
    ],
    "suppressedMessages": [],
    "errorCount": 2,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { User, Phone, Save } from 'lucide-react';\r\n\r\nimport type { AppDispatch } from '../../../redux/store';\r\nimport type { IUser } from '../../../redux/types/authTypes';\r\nimport { updateProfile } from '../../../redux/actions/profileActions';\r\n\r\ninterface ProfileInfoProps {\r\n    user: IUser;\r\n}\r\n\r\nexport default function ProfileInfo({ user }: ProfileInfoProps) {\r\n    const dispatch = useDispatch<AppDispatch>();\r\n    const [formData, setFormData] = useState({\r\n        name: user.name || '',\r\n        phone: user.phone || '',\r\n    });\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [message, setMessage] = useState<{\r\n        type: 'success' | 'error';\r\n        text: string;\r\n    } | null>(null);\r\n    const [phoneError, setPhoneError] = useState('');\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = e.target;\r\n        setFormData((prev) => ({ ...prev, [name]: value }));\r\n\r\n        if (name === 'phone') {\r\n            if (!validatePhone(value)) {\r\n                setPhoneError('Please enter a valid phone number (at least 10 digits).');\r\n            } else {\r\n                setPhoneError('');\r\n            }\r\n        }\r\n    };\r\n\r\n    const validatePhone = (phone: string) => {\r\n        // Remove spaces, dashes, parentheses to count digits\r\n        const digits = phone.replace(/\\D/g, '');\r\n        // Basic check: at least 10 digits\r\n        if (digits.length < 10) {\r\n            return false;\r\n        }\r\n        // Check for invalid characters (allow digits, space, +, -, (, ))\r\n        const validChars = /^[0-9+\\-\\s()]*$/;\r\n        return validChars.test(phone);\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (phoneError) {\r\n            return;\r\n        }\r\n\r\n        setIsSaving(true);\r\n        setMessage(null);\r\n\r\n        try {\r\n            await dispatch(updateProfile(formData));\r\n            setMessage({ type: 'success', text: 'Profile updated successfully!' });\r\n        } catch (error) {\r\n            setMessage({ type: 'error', text: 'Failed to update profile.' });\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-xl\">\r\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                        Full Name\r\n                    </label>\r\n                    <div className=\"relative\">\r\n                        <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                            <User size={18} className=\"text-gray-400\" />\r\n                        </div>\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"name\"\r\n                            value={formData.name}\r\n                            onChange={handleChange}\r\n                            className=\"block w-full pl-10 pr-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500/20 focus:border-green-500 transition-all text-sm\"\r\n                            placeholder=\"Your full name\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                        Phone Number\r\n                    </label>\r\n                    <div className=\"relative\">\r\n                        <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                            <Phone size={18} className=\"text-gray-400\" />\r\n                        </div>\r\n                        <input\r\n                            type=\"tel\"\r\n                            name=\"phone\"\r\n                            value={formData.phone}\r\n                            onChange={handleChange}\r\n                            className=\"block w-full pl-10 pr-3 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500/20 focus:border-green-500 transition-all text-sm\"\r\n                            placeholder=\"+1 234 567 8900\"\r\n                        />\r\n                    </div>\r\n                    {phoneError && <p className=\"text-red-500 text-xs mt-1\">{phoneError}</p>}\r\n                </div>\r\n\r\n                {message && (\r\n                    <div\r\n                        className={`p-3 rounded-lg text-sm ${message.type === 'success'\r\n                            ? 'bg-green-50 text-green-700'\r\n                            : 'bg-red-50 text-red-700'\r\n                            }`}\r\n                    >\r\n                        {message.text}\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"pt-2\">\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={isSaving || !!phoneError}\r\n                        className=\"flex items-center gap-2 px-6 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors font-medium shadow-sm disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                    >\r\n                        {isSaving ? (\r\n                            <span className=\"w-5 h-5 border-2 border-white/20 border-t-white rounded-full animate-spin\" />\r\n                        ) : (\r\n                            <Save size={18} />\r\n                        )}\r\n                        Save Changes\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n",
    "usedDeprecatedRules": [
      {
        "ruleId": "no-multiple-empty-lines",
        "replacedBy": ["@stylistic/no-multiple-empty-lines"],
        "info": {
          "message": "Formatting rules are being moved out of ESLint core.",
          "url": "https://eslint.org/blog/2023/10/deprecating-formatting-rules/",
          "deprecatedSince": "8.53.0",
          "availableUntil": "11.0.0",
          "replacedBy": [
            {
              "message": "ESLint Stylistic now maintains deprecated stylistic core rules.",
              "url": "https://eslint.style/guide/migration",
              "plugin": {
                "name": "@stylistic/eslint-plugin",
                "url": "https://eslint.style"
              },
              "rule": {
                "name": "no-multiple-empty-lines",
                "url": "https://eslint.style/rules/no-multiple-empty-lines"
              }
            }
          ]
        }
      },
      {
        "ruleId": "arrow-spacing",
        "replacedBy": ["@stylistic/arrow-spacing"],
        "info": {
          "message": "Formatting rules are being moved out of ESLint core.",
          "url": "https://eslint.org/blog/2023/10/deprecating-formatting-rules/",
          "deprecatedSince": "8.53.0",
          "availableUntil": "11.0.0",
          "replacedBy": [
            {
              "message": "ESLint Stylistic now maintains deprecated stylistic core rules.",
              "url": "https://eslint.style/guide/migration",
              "plugin": {
                "name": "@stylistic/eslint-plugin",
                "url": "https://eslint.style"
              },
              "rule": {
                "name": "arrow-spacing",
                "url": "https://eslint.style/rules/arrow-spacing"
              }
            }
          ]
        }
      }
    ]
  },
  {
    "filePath": "C:\\Users\\navya\\Desktop\\Groceazy-code\\client\\src\\redux\\actions\\authActions.ts",
    "messages": [
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement.",
        "line": 98,
        "column": 7,
        "nodeType": "MemberExpression",
        "messageId": "unexpected",
        "endLine": 98,
        "endColumn": 20,
        "suggestions": [
          {
            "fix": { "range": [3352, 3403], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "error" },
            "desc": "Remove the console.error()."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "// src/redux/actions/authActions.ts\r\nimport type { Dispatch } from 'redux';\r\nimport {\r\n  AUTH_LOGIN_REQUEST,\r\n  AUTH_LOGIN_SUCCESS,\r\n  AUTH_LOGIN_FAILURE,\r\n  AUTH_LOGOUT,\r\n  AUTH_REGISTER_REQUEST,\r\n  AUTH_REGISTER_SUCCESS,\r\n  AUTH_REGISTER_FAILURE,\r\n  AUTH_FORGOT_PASSWORD_REQUEST,\r\n  AUTH_FORGOT_PASSWORD_SUCCESS,\r\n  AUTH_RESET_PASSWORD_REQUEST,\r\n  AUTH_RESET_PASSWORD_SUCCESS,\r\n  AUTH_RESET_PASSWORD_FAILURE,\r\n} from '../types/authTypes';\r\nimport type {\r\n  AuthActionTypes,\r\n  ILoginResponse,\r\n  IUser,\r\n} from '../types/authTypes';\r\nimport api from '../../services/api';\r\nimport { AUTH_KEYS } from '../../constants/auth';\r\n\r\ntype LoginPayload = { email: string; password: string };\r\ntype RegisterPayload = { name: string; email: string; password: string };\r\n\r\nexport const login = (payload: LoginPayload) => {\r\n  return async (dispatch: Dispatch<AuthActionTypes>) => {\r\n    dispatch({ type: AUTH_LOGIN_REQUEST });\r\n    try {\r\n      // API call using the axios instance\r\n      const { data } = await api.post<ILoginResponse>(\r\n        '/api/auth/login',\r\n        payload\r\n      );\r\n\r\n      // store accessToken in localStorage settings\r\n      localStorage.setItem(AUTH_KEYS.ACCESS_TOKEN, data.accessToken);\r\n      localStorage.setItem(AUTH_KEYS.REFRESH_TOKEN, data.refreshToken);\r\n      localStorage.setItem(AUTH_KEYS.USER, JSON.stringify(data.user));\r\n\r\n      dispatch({\r\n        type: AUTH_LOGIN_SUCCESS,\r\n        payload: { accessToken: data.accessToken, user: data.user as IUser },\r\n      });\r\n    } catch (err: any) { // eslint-disable-line @typescript-eslint/no-explicit-any\r\n      const errorMessage =\r\n        err.response?.data?.message || err.message || 'Login failed';\r\n      dispatch({\r\n        type: AUTH_LOGIN_FAILURE,\r\n        payload: { error: errorMessage },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const register = (payload: RegisterPayload) => {\r\n  return async (dispatch: Dispatch<AuthActionTypes>) => {\r\n    dispatch({ type: AUTH_REGISTER_REQUEST });\r\n    try {\r\n      await api.post('/api/auth/register', payload);\r\n\r\n      dispatch({ type: AUTH_REGISTER_SUCCESS });\r\n      // Note: Registration doesn't auto-login per spec, so no token setting here.\r\n      // The UI should redirect to Login.\r\n    } catch (err: any) { // eslint-disable-line @typescript-eslint/no-explicit-any\r\n      const errorMessage =\r\n        err.response?.data?.message || err.message || 'Registration failed';\r\n      dispatch({\r\n        type: AUTH_REGISTER_FAILURE,\r\n        payload: { error: errorMessage },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const logout = () => {\r\n  return async (dispatch: Dispatch<AuthActionTypes>) => {\r\n    const refreshToken = localStorage.getItem(AUTH_KEYS.REFRESH_TOKEN);\r\n    // const accessToken = localStorage.getItem(AUTH_KEYS.ACCESS_TOKEN);\r\n\r\n    // Clean up locally FIRST\r\n    localStorage.removeItem(AUTH_KEYS.ACCESS_TOKEN);\r\n    localStorage.removeItem(AUTH_KEYS.REFRESH_TOKEN);\r\n    localStorage.removeItem(AUTH_KEYS.USER);\r\n\r\n    // Dispatch logout to clear Redux state immediately to update UI\r\n    dispatch({ type: AUTH_LOGOUT });\r\n\r\n    try {\r\n      // Attempt server-side logout (blacklist refresh token)\r\n      if (refreshToken) {\r\n        // Access token is automatically attached by interceptor if present\r\n        await api.post('/api/auth/logout', { refreshToken });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Logout backend call failed\", error);\r\n    } finally {\r\n      // Optional: Force reload to ensure clean state\r\n      // window.location.reload(); \r\n    }\r\n  };\r\n};\r\n\r\n// Google Login Action\r\nexport const googleLogin = (token: string) => {\r\n  return async (dispatch: Dispatch<AuthActionTypes>) => {\r\n    dispatch({ type: AUTH_LOGIN_REQUEST });\r\n    try {\r\n      const { data } = await api.post<ILoginResponse>('/api/auth/google', {\r\n        token,\r\n      });\r\n\r\n      localStorage.setItem(AUTH_KEYS.ACCESS_TOKEN, data.accessToken);\r\n      localStorage.setItem(AUTH_KEYS.REFRESH_TOKEN, data.refreshToken);\r\n      localStorage.setItem(AUTH_KEYS.USER, JSON.stringify(data.user));\r\n\r\n      dispatch({\r\n        type: AUTH_LOGIN_SUCCESS,\r\n        payload: { accessToken: data.accessToken, user: data.user as IUser },\r\n      });\r\n    } catch (err: any) { // eslint-disable-line @typescript-eslint/no-explicit-any\r\n      const errorMessage =\r\n        err.response?.data?.message || err.message || 'Google login failed';\r\n      dispatch({\r\n        type: AUTH_LOGIN_FAILURE,\r\n        payload: { error: errorMessage },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const forgotPassword = (email: string) => {\r\n  return async (dispatch: Dispatch<AuthActionTypes>) => {\r\n    dispatch({ type: AUTH_FORGOT_PASSWORD_REQUEST });\r\n    try {\r\n      await api.post('/api/auth/forgot-password', { email });\r\n      dispatch({ type: AUTH_FORGOT_PASSWORD_SUCCESS });\r\n    } catch {\r\n      // Error handled by reducer/toast\r\n    }\r\n  };\r\n};\r\n\r\nexport const resetPassword = (token: string, password: string) => {\r\n  return async (dispatch: Dispatch<AuthActionTypes>) => {\r\n    dispatch({ type: AUTH_RESET_PASSWORD_REQUEST });\r\n    try {\r\n      await api.post('/api/auth/reset-password', { token, password });\r\n      dispatch({ type: AUTH_RESET_PASSWORD_SUCCESS });\r\n    } catch (err: any) { // eslint-disable-line @typescript-eslint/no-explicit-any\r\n      const errorMessage =\r\n        err.response?.data?.message || err.message || 'Reset password failed';\r\n      dispatch({\r\n        type: AUTH_RESET_PASSWORD_FAILURE,\r\n        payload: { error: errorMessage },\r\n      });\r\n      throw err;\r\n    }\r\n  };\r\n};\r\n",
    "usedDeprecatedRules": [
      {
        "ruleId": "no-multiple-empty-lines",
        "replacedBy": ["@stylistic/no-multiple-empty-lines"],
        "info": {
          "message": "Formatting rules are being moved out of ESLint core.",
          "url": "https://eslint.org/blog/2023/10/deprecating-formatting-rules/",
          "deprecatedSince": "8.53.0",
          "availableUntil": "11.0.0",
          "replacedBy": [
            {
              "message": "ESLint Stylistic now maintains deprecated stylistic core rules.",
              "url": "https://eslint.style/guide/migration",
              "plugin": {
                "name": "@stylistic/eslint-plugin",
                "url": "https://eslint.style"
              },
              "rule": {
                "name": "no-multiple-empty-lines",
                "url": "https://eslint.style/rules/no-multiple-empty-lines"
              }
            }
          ]
        }
      },
      {
        "ruleId": "arrow-spacing",
        "replacedBy": ["@stylistic/arrow-spacing"],
        "info": {
          "message": "Formatting rules are being moved out of ESLint core.",
          "url": "https://eslint.org/blog/2023/10/deprecating-formatting-rules/",
          "deprecatedSince": "8.53.0",
          "availableUntil": "11.0.0",
          "replacedBy": [
            {
              "message": "ESLint Stylistic now maintains deprecated stylistic core rules.",
              "url": "https://eslint.style/guide/migration",
              "plugin": {
                "name": "@stylistic/eslint-plugin",
                "url": "https://eslint.style"
              },
              "rule": {
                "name": "arrow-spacing",
                "url": "https://eslint.style/rules/arrow-spacing"
              }
            }
          ]
        }
      }
    ]
  }
]
